import subprocess

yang_file = "ietf-interfaces.yang"

print("Generating YANG tree structure...\n")

subprocess.run(["pyang", "-f", "tree", yang_file])



import subprocess
import sys
import os

# YANG model used in your project
yang_file = "ietf-interfaces.yang"

print("\nSTEP 1: Checking if YANG file exists...\n")

if not os.path.exists(yang_file):
    print("ERROR: YANG file not found in project folder.")
    sys.exit()

print("YANG file found.\n")

# STEP 2 — Validate YANG model
print("STEP 2: Validating YANG model...\n")

validation = subprocess.run(
    ["pyang", yang_file],
    capture_output=True,
    text=True
)

if validation.returncode != 0:
    print("Validation FAILED:\n")
    print(validation.stderr)
    sys.exit()

print("Validation SUCCESS — Model is correct.\n")

# STEP 3 — Show model structure (tree format)
print("STEP 3: Displaying YANG tree structure...\n")

subprocess.run(["pyang", "-f", "tree", yang_file])

print("\nYANG model is ready for NETCONF automation.")

module project-interfaces {
  namespace "http://example.com/project-interfaces";
  prefix pif;

  organization "Network Automation Project";
  description
    "YANG model for configuring Loopback interfaces via NETCONF";

  revision 2026-02-13 {
    description "Initial version";
  }

  container interfaces {
    description "Interface configuration container";

    list interface {
      key "name";
      description "Interface list";

      leaf name {
        type string;
        description "Interface name (e.g., Loopback10)";
      }

      leaf description {
        type string;
        description "Interface description";
      }

      leaf enabled {
        type boolean;
        default true;
        description "Administrative state of interface";
      }
    }
  }
}

